%chktex-file 15
% This file is part of Harish's Resume.
%
% Copyright (C) 2019  Harish Rajagopal <harish.rajagopals@gmail.com>
%
% Harish's Resume is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% (at your option) any later version.
%
% Harish's Resume is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
%
% You should have received a copy of the GNU General Public License
% along with Harish's Resume.  If not, see <https://www.gnu.org/licenses/>.
\documentclass[10pt, a4paper]{article}
\usepackage[margin=8mm]{geometry}  % for setting page margins
\usepackage{xcolor,colortbl}  % for setting colours
\usepackage[pdfusetitle]{hyperref}  % control hyperlink formatting and auto-add PDF metadata
\usepackage{titlesec}  % for changing section styling
\usepackage{fontawesome5}  % for icons like GitHub, email, mobile, etc.
\usepackage{tabulary}  % for custom columns having auto width
\usepackage{etoolbox}  % for patching tabulary and for if-else
\usepackage{booktabs}  % for good-looking table lines
\usepackage{enumitem}  % for changing indentation of itemize
\usepackage{multicol}  % for two-column layout
\usepackage{graphicx,multirow}  % for setting and aligning the photo within the header
\usepackage{fontspec}  % for changing the default font

% Use the TeX Gyre Pagella font, similar to Palatino
\setmainfont{TeX Gyre Pagella}

% Define colours
\definecolor{accent}{HTML}{888888}
\definecolor{headings}{HTML}{000000}
\definecolor{text}{HTML}{444444}
\definecolor{misc}{HTML}{888888}
\definecolor{background}{HTML}{ffffff}

% Custom command for headings
\newcommand{\heading}[1]{\textcolor{headings}{\textbf{#1}}}

% Set global colours
\color{text}
\pagecolor{background}

% Patch for tabulary to have fixed width tables:
% https://tex.stackexchange.com/a/87111/147074
\makeatletter
\patchcmd\TY@checkmin%
{\def\TY@ratio{1}}
{%
    \@tempdima\dimexpr\p@*\TY@linewidth/\TY@tablewidth\relax
    \edef\TY@ratio{\strip@pt\@tempdima}%
}{}{}
\let\TY@@checkmin\TY@checkmin%
\makeatother

% Switch to etoolbox from pure LaTeX because the latter sucks
\newtoggle{onepage}
\ifonepage%
    \toggletrue{onepage}
\else
    \togglefalse{onepage}
\fi

% Custom styling for section
\titleformat{\section}{\Large\scshape\color{headings}}{\thesection}{2mm}{\vspace{-2mm}}[\vspace{-4mm}\hrulefill\vspace{-2mm}]

% Custom styling for itemize
\setlist[itemize,1]{leftmargin=0mm,label={}}
\setlist[itemize,2]{label={\footnotesize\textbullet}}

% Custom environment to be used for a single project, internship, etc.
% First argument is an OPTIONAL link
% Second argument is the name of the project
% Third argument is the date/duration
% Fourth argument is the name of the mentor(s)
\newenvironment{project}[4][]  % optional link is by default empty
{
    \iftoggle{onepage}
    {
        \href{#1}{\heading{#2}}\\
        \textcolor{misc}{\textit{\small #4\hfill#3}}\\[-6mm]
        \begin{itemize}[itemsep=0mm]
    }
    {
        \heading{#2} \hfill{\small #3}\\
        \textcolor{misc}{\textit{\small #4 \hfill\href{#1}{#1}}}\par
        \begin{itemize}
    }
}
{
    \end{itemize}
}

% Custom command to be used for an empty listing for a single project, internship, etc.
% First argument is an OPTIONAL link
% Second argument is the name of the project
% Third argument is the date/duration
% Fourth argument is the name of the mentor(s)
\newcommand{\emptyproject}[4][]  % optional link is by default empty
{%
    \iftoggle{onepage}
    {
        \href{#1}{\heading{#2}}\\
        \textcolor{misc}{\textit{\small #4\hfill#3}}\par
    }
    {
        \heading{#2} \hfill{\small #3}\\
        \textcolor{misc}{\textit{\small #4\hfill\href{#1}{#1}}}\par
    }
}

% Custom command to display its contents only in certain modes (full/single-page)
\newcommand{\iffull}[1]{\iftoggle{onepage}{}{#1}}
\newcommand{\ifsingle}[1]{\iftoggle{onepage}{#1}{}}

% Miscellaneous options
\hypersetup{%
    colorlinks=true,  % do not draw boxes around links, color the links themselves
    urlcolor=accent,
    pdfsubject={Resume},
    pdfkeywords={resume, cv}
}
\pagenumbering{gobble}  % hide page numbering
\setlength\extrarowheight{3pt}  % add more vertical space for rows

\iftoggle{onepage}
{
    \setlength{\columnsep}{8mm}  % set separation between the two columns
    \setitemize{leftmargin=5mm}  % changing indentation for itemize
}{}

\title{R. Harish --- Resume}
\author{Harish Rajagopal}

\begin{document}
    \input{sections/header.tex}
    \input{sections/education.tex}

    \ifsingle{\vspace{2mm}\begin{multicols}{2}}

    \input{sections/achievements.tex}
    \input{sections/relevant_experience.tex}
    \input{sections/other_experience.tex}
    \input{sections/projects.tex}
    \input{sections/skills.tex}
    \iffull{\input{sections/courses.tex}}
    \input{sections/hobbies.tex}

    \ifsingle{\end{multicols}}
\end{document}
